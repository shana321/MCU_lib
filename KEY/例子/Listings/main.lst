C51 COMPILER V9.54   MAIN                                                                  03/07/2018 00:05:25 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "main.h"
   2          #include "keyboard.h"
   3          
   4          
   5          Keyscan_Type LED_A,LED_B;
   6          GPIO_PinState stc8051_key_read(Keyscan_Type *myself)//°´Å¥µÄ¶ÁIO»Øµ÷º¯Êý,ÓÃÓÚ·µ»ØIO¿ÚµÄ×´Ì¬
   7          {
   8   1        if(myself == &LED_A)
   9   1        {
  10   2          return P1&0x01;
  11   2        }
  12   1        if(myself == &LED_B)
  13   1        {
  14   2          return P0&0x01;
  15   2        }
  16   1        return 0;
  17   1      }
  18          
  19          uint8_t stc8051_key_cb(Keyscan_Type *myself,Key_State pt_t)//°´¼üÉ¨Ãè»Øµ÷º¯Êý,Äã¿ÉÒÔÔÚÕâÇáËÉµÄÍê³ÉÁ¬°´£¬³¤
             -°´(ÐèÒªÅäºÏÏµÍ³Ê±ÖÓ)»òÕßÊÇ×éºÏ°´Å¥
  20          {
  21   1        //ÏÂÃæÕ¹Ê¾ÁËÁ½ÖÖÐ´·¨
  22   1        if(myself == &LED_B)//ÊÇ°´Å¥B°´ÏÂ
  23   1        {
  24   2          switch(pt_t)
  25   2          {
  26   3            case KEY_DOWNED://°´Å¥ÒÑ¾­°´ÏÂ
  27   3              break;
  28   3            case KEY_DOWNING://°´Å¥¸Õ¸Õ°´ÏÂ
  29   3              P2 ^= 0x01;
  30   3              break;
  31   3            case KEY_UPED://°´Å¥ÒÑ¾­ÊÍ·Å
  32   3              break;
  33   3            case KEY_UPING://°´Å¥¸Õ¸ÕÊÍ·Å
  34   3              break;
  35   3          }
  36   2        }
  37   1        switch(pt_t)
  38   1        {
  39   2          case KEY_DOWNED://°´Å¥ÒÑ¾­°´ÏÂ
  40   2            break;
  41   2          case KEY_DOWNING://°´Å¥¸Õ¸Õ°´ÏÂ
  42   2            if(myself == &LED_A){P3 ^= 0x01;}
  43   2            break;
  44   2          case KEY_UPED://°´Å¥ÒÑ¾­ÊÍ·Å
  45   2            break;
  46   2          case KEY_UPING://°´Å¥¸Õ¸ÕÊÍ·Å
  47   2            break;
  48   2        }
  49   1        return 0;
  50   1      }
  51          void main( void )
  52          {
  53   1        KeyBoard_Init(&LED_A,stc8051_key_read,stc8051_key_cb);
C51 COMPILER V9.54   MAIN                                                                  03/07/2018 00:05:25 PAGE 2   

  54   1        KeyBoard_Init(&LED_B,stc8051_key_read,stc8051_key_cb);//³õÊ¼»¯Ò»¸ö°´Å¥¶ÔÏó£¬Õâ¸ö°´Å¥¶ÔÏóÒÔ³õÊ¼»¯Ê±ºò¶Áµ½µ
             -ÄµçÆ½Îª¿ÕÏÐµçÆ½£¬²¢ÒÔ´ËÎª»ù×¼
  55   1        while(1)
  56   1        {
  57   2          KeyScan(&LED_A);//²»Í£µÄ°´Å¥É¨Ãè
  58   2          KeyScan(&LED_B);//²»Í£µÄ°´Å¥É¨Ãè
  59   2        }
  60   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    343    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     23    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
